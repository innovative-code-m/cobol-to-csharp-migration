# ADR-0003: AI分業開発ワークフロー定義

## Status
Accepted

---

## Context（背景・課題）

本プロジェクトでは、複数の AI（ChatGPT / Codex / Gemini / Claude）を分業させ、
仕様策定から実装、テスト、監査、構造改修までを段階的に進める開発スタイルを採用している。

しかし、AI を分業するだけでは以下の問題が残る。

- どの順序で AI を使うのかが曖昧になる
- 工程の抜け・逆順実行により品質が不安定になる
- 個人の裁量によりワークフローがばらつく
- 後から見たときに「正しい進め方」が分からない

これらを防ぐため、**AI 分業を前提とした公式な開発ワークフロー**を定義し、
手順そのものを設計資産として固定する必要がある。

---

## Decision（決定事項）

以下の開発ワークフローを本プロジェクトの **標準手順** として正式決定する。

1. 開発は **工程順にのみ進める**
2. 工程は **専用プロンプトと専用 AI** で実行する
3. 工程のスキップ・逆順実行は禁止する（例外は ADR で定義）
4. 各工程の成果物は Git に残す

---

## Standard Workflow（標準開発フロー）

### Step 0: 仕様確定（編集長）

- 担当 AI：ChatGPT
- 成果物：
  - `docs/spec/*.md`

**目的**
- 実装前に仕様を確定させる
- 曖昧な要求を排除する

---

### Step 1: 実装（差分実装）

- 担当 AI：Codex
- 使用プロンプト：
  - `dev/01_Implement.prompt.md`
- 成果物：
  - `src/**`

**ルール**
- 差分のみで実装する
- 設計変更は禁止

---

### Step 2: テスト実装

- 担当 AI：Codex
- 使用プロンプト：
  - `dev/03_Test.prompt.md`
- 成果物：
  - `tests/**`

**ルール**
- 実装コードを変更しない
- 正常系・異常系・境界値を含める

---

### Step 3: 軽量リファクタ（任意）

- 担当 AI：Codex
- 使用プロンプト：
  - `dev/02_Refactor.prompt.md`

**ルール**
- 振る舞い不変
- 必要な場合のみ実施

---

### Step 4: 仕様監査

- 担当 AI：Gemini
- 使用プロンプト：
  - `audit/11_SpecAudit.prompt.md`

**目的**
- 仕様と実装の齟齬検出

---

### Step 5: カバレッジ可視化

- 担当 AI：Gemini
- 使用プロンプト：
  - `audit/12_CoverageMatrix.prompt.md`

**目的**
- テスト網羅性の把握

---

### Step 6: 大規模構造改修（必要時）

- 担当 AI：Claude
- 使用プロンプト：
  - `refactor/22_LargeRefactor.prompt.md`

**ルール**
- 構造整理のみ
- 機能変更禁止

---

### Step 7: 統合・文書更新

- 担当 AI：ChatGPT
- 使用プロンプト：
  - `editor/21_Integrate.prompt.md`

**成果物**
- README
- 仕様書更新
- ADR 更新（必要時）

---

## Workflow Constraints（制約事項）

- Step 1〜5 は原則必須
- Step 3 / 6 は状況に応じて省略可
- 省略・逆順実行する場合は理由を記録する

---

## Consequences（結果・効果）

### 利点

- 開発手順が明確になり迷いが減る
- 品質が工程で担保される
- 作業の再現性・説明責任が高まる

### トレードオフ

- 即興的な修正には向かない
- 初期は工程数が多く感じられる

---

## Notes（補足）

- 本ワークフローはプロジェクトの成熟に応じて見直す
- 大きな変更は新しい ADR として記録する

---

## Revision History

- 2026-02-03: 初版作成

