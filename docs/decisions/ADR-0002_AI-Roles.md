# ADR-0002: AI役割分担（AI-Roles）定義

## Status
Accepted

---

## Context（背景・課題）

本プロジェクトでは、複数の AI（ChatGPT / Codex / Gemini / Claude）を併用し、
仕様策定から実装、テスト、監査、構造改修までを AI 支援で進めている。

しかし、AI を明確な役割分担なしに使用すると、以下の問題が発生する。

- AI が設計・仕様判断に踏み込み、方針が揺らぐ
- 実装・監査・改修の境界が曖昧になり、品質事故が起きる
- 「どの AI が何を担当したか」が後から追跡できない
- 同一 AI が複数工程を跨ぎ、自己レビュー状態になる

これらを防ぐため、**AI を人員と同様に工程別に配置し、
役割・権限・禁止事項を明文化する必要がある**。

---

## Decision（決定事項）

以下の AI 役割分担を正式決定とする。

1. **AI は工程単位で役割固定とする**
2. **1タスク = 1AI = 1役割 を原則とする**
3. **役割外の判断・作業は禁止する**
4. **役割の切替は AI（拡張・チャット）を切り替えることで行う**

---

## AI Roles（役割定義）

### ChatGPT：編集長／司令塔

**責務**
- 仕様策定・要件整理
- 設計判断の統合
- README / ADR / 方針文書の作成・更新
- 各工程成果物の最終整合確認

**使用プロンプト／成果物**
- `docs/spec/*.md`
- `docs/decisions/*.md`
- `editor/21_Integrate.prompt.md`

**禁止事項**
- 実装コードの直接生成
- テストコードの直接生成

---

### Codex：実装担当

**責務**
- 仕様に基づくコード実装
- テストコードの作成・補強

**使用プロンプト**
- `dev/01_Implement.prompt.md`
- `dev/02_Refactor.prompt.md`
- `dev/03_Test.prompt.md`

**禁止事項**
- 設計・仕様変更
- 構造レベルの大規模改修
- 監査・評価判断

---

### Gemini：監査担当

**責務**
- 仕様と実装の齟齬検出
- テスト網羅性・境界値不足の指摘
- カバレッジの可視化

**使用プロンプト**
- `audit/11_SpecAudit.prompt.md`
- `audit/12_CoverageMatrix.prompt.md`

**禁止事項**
- 実装・テストコードの修正
- 設計改善提案

---

### Claude：構造改修担当

**責務**
- 複数ファイル横断の構造整理
- 責務分離・依存関係の整理

**使用プロンプト**
- `refactor/22_LargeRefactor.prompt.md`

**禁止事項**
- 機能仕様の変更
- public API の変更
- 軽微な修正への使用

---

## Role Switching（役割切替ルール）

- 役割を切り替える場合は、**AI ツール／チャットを切り替える**
- 同一チャット内で役割を変更しない
- 役割違反が疑われる場合は作業を中断する

---

## Consequences（結果・効果）

### 利点

- AI が工程を越境しないため品質が安定する
- 各成果物の責任範囲が明確になる
- 作業履歴の説明責任を果たせる

### トレードオフ

- AI 利用の自由度は下がる
- 初期に役割理解が必要

---

## Notes（補足）

- 本 ADR は AI の追加・廃止・役割変更時に更新する
- 例外運用が必要な場合は、新たな ADR を作成する

---

## Revision History

- 2026-02-03: 初版作成

