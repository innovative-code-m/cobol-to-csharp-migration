# AIプロンプト体系 README

本ディレクトリは、本プロジェクトにおける **AI分業開発を成立させるための公式プロンプト集** である。

ここに配置されたプロンプトは、単なる指示文ではなく、
**AIを工程要員として安全に使うための「作業契約書」**として扱う。

---

## 1. 本READMEの目的

- どの工程で、どのプロンプトを使うかを明確にする
- プロンプトの誤用・越権使用を防止する
- 初見の開発者・将来の自分でも同じ手順を再現できるようにする

---

## 2. ディレクトリ構成と意味

```
docs/prompts/
  dev/        # 実装・テスト・軽量整理
  audit/      # 仕様監査・網羅性分析
  editor/     # 統合・文書化
  refactor/   # 大規模構造改修
```

各ディレクトリは **工程フェーズ** を表し、
原則としてフェーズを跨いだ使用は禁止する。

---

## 3. プロンプト一覧と用途

### 3.1 dev（実装フェーズ）

| プロンプト | 役割 | 使用タイミング |
|---|---|---|
| 01_Implement.prompt.md | 差分実装 | 機能追加・修正時 |
| 02_Refactor.prompt.md | 軽量整理 | 読みにくくなった時 |
| 03_Test.prompt.md | テスト実装 | 実装直後・不足検出後 |

**注意事項**
- dev 配下のプロンプトでは設計変更を行ってはいけない

---

### 3.2 audit（監査フェーズ）

| プロンプト | 役割 | 使用タイミング |
|---|---|---|
| 11_SpecAudit.prompt.md | 仕様監査 | 実装・テスト後 |
| 12_CoverageMatrix.prompt.md | 網羅性可視化 | 監査直後 |

**注意事項**
- audit フェーズではコードを変更しない

---

### 3.3 editor（統合フェーズ）

| プロンプト | 役割 | 使用タイミング |
|---|---|---|
| 21_Integrate.prompt.md | 統合・編集 | 作業完了時 |

**注意事項**
- editor は成果物を収束させる工程であり、実装を行わない

---

### 3.4 refactor（構造改修フェーズ）

| プロンプト | 役割 | 使用タイミング |
|---|---|---|
| 22_LargeRefactor.prompt.md | 構造大改修 | 構造破綻時のみ |

**注意事項**
- refactor は「覚悟して入るフェーズ」
- 機能仕様の変更は禁止

---

## 4. 標準使用フロー（再掲）

1. 01_Implement
2. 03_Test
3. 02_Refactor（必要時）
4. 11_SpecAudit
5. 12_CoverageMatrix
6. 21_LargeRefactor（必要時）
7. 22_Integrate

※ 正式定義は `ADR-0003_Workflow.md` を参照

---

## 5. 運用ルール（重要）

- 1タスク = 1プロンプト = 1役割
- 同一チャットでプロンプトを切り替えない
- プロンプト内容をその場で改変しない
- 変更が必要な場合はプロンプト自体を更新する

---

## 6. プロンプト更新ルール

- プロンプト変更は設計変更とみなす
- 変更理由を ADR またはコミットメッセージに残す
- 一時的な例外運用は禁止

---

## 7. 関連ドキュメント

- `docs/decisions/ADR-0001_Tooling.md`
- `docs/decisions/ADR-0002_AI-Roles.md`
- `docs/decisions/ADR-0003_Workflow.md`

---

## 8. 最後に

このプロンプト体系は、
**AIを「便利なチャット」ではなく「工程要員」として扱うための基盤**である。

迷ったときは、
- この README
- 対応する ADR

に立ち返ること。

---

以上
